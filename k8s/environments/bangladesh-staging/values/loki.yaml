loki:
  gateway:
    ingress:
      enabled: true
      ingressClassName: "nginx"
      annotations:
        cert-manager.io/cluster-issuer: "letsencrypt-prod"
        nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
        nginx.ingress.kubernetes.io/auth-type: basic
        nginx.ingress.kubernetes.io/auth-realm: 'Authentication Required'
        nginx.ingress.kubernetes.io/auth-secret: loki-basic-auth
      labels: {}
      hosts:
        - host: gateway-loki-demo.bd.simple.org
          paths:
            - path: /
              pathType: ImplementationSpecific
      tls:
        - secretName: loki-gateway-tls
          hosts:
            - gateway-loki-demo.bd.simple.org
  loki:
    storage:
      bucketNames:
        chunks: "rtsl-bangaladesh-staging-loki"
        ruler:  "rtsl-bangaladesh-staging-loki"
        admin:  "rtsl-bangaladesh-staging-loki"
    compactor: {}
    rulerConfig: {}
    extraMemberlistConfig:
      bind_addr:
        - ${MY_POD_IP}
  backend:
    extraEnv:
      - name: MY_POD_IP
        valueFrom:
          fieldRef:
            fieldPath: status.podIP
      - name: LOKI_S3_ACCESKEYID
        valueFrom:
          secretKeyRef:
            name: loki-secrets
            key: LOKI_S3_ACCESKEYID
      - name: LOKI_S3_SECRETACCESSKEY
        valueFrom:
          secretKeyRef:
            name: loki-secrets
            key: LOKI_S3_SECRETACCESSKEY
  read:
    extraEnv:
      - name: MY_POD_IP
        valueFrom:
          fieldRef:
            fieldPath: status.podIP
      - name: LOKI_S3_ACCESKEYID
        valueFrom:
          secretKeyRef:
            name: loki-secrets
            key: LOKI_S3_ACCESKEYID
      - name: LOKI_S3_SECRETACCESSKEY
        valueFrom:
          secretKeyRef:
            name: loki-secrets
            key: LOKI_S3_SECRETACCESSKEY
  write:
    extraEnv:
      - name: MY_POD_IP
        valueFrom:
          fieldRef:
            fieldPath: status.podIP
      - name: LOKI_S3_ACCESKEYID
        valueFrom:
          secretKeyRef:
            name: loki-secrets
            key: LOKI_S3_ACCESKEYID
      - name: LOKI_S3_SECRETACCESSKEY
        valueFrom:
          secretKeyRef:
            name: loki-secrets
            key: LOKI_S3_SECRETACCESSKEY
